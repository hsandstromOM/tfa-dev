!function(){angular.module("mailchimp",["ng","ngResource","ngSanitize"]).controller("MailchimpSubscriptionCtrl",["$log","$resource","$scope","$rootScope",function(e,s,r,o){r.addSubscription=function(r){var n,c,i,a={};i="//"+r.username+"."+r.dc+".list-manage.com/subscribe/post-json";for(var t=Object.keys(r),u=0;u<t.length;u++)a[t[u]]=r[t[u]];a.c="JSON_CALLBACK",n={save:{method:"jsonp"}},c=s(i,a,n),c.save(function(e){if(r.errorMessage="",r.successMessage="",r.result=e.result,"error"===e.result)if(e.msg){var s=e.msg.split(" - ");s.length>1&&s.shift(),r.errorMessage=s.join(" ")}else r.errorMessage="Sorry! An unknown error occured.";else"success"===e.result&&(r.successMessage="Thanks for signing up for the Charleston Parks Conservancy eNews!");o.$broadcast("mailchimp-response",e.result,e.msg)},function(s){e.error("MailChimp Error: %o",s)})}}])}();
